# سجل التغييرات - نظام تسجيل الدخول والتحسينات

## تم تنفيذه

### 1. إزالة Manus و Google OAuth
- حذف `server/_core/oauth.ts`
- حذف `client/public/__manus__/debug-collector.js`
- إزالة `vite-plugin-manus-runtime` و `vitePluginManusDebugCollector` من vite.config
- تحديث `ManusDialog` و `useAuth` لنصوص عربية

### 2. نظام تسجيل دخول محلي جديد
- **يوزر نيم + كلمة سر**: 6+ خانات، يبدأ بحرف
- **رقم جوال + كلمة سر**: يبدأ بكود الدولة مثل +966
- **دخول ضيف**: حساب مؤقت لتجربة التطبيق

### 3. قواعد التحقق
| الحقل | القاعدة |
|-------|---------|
| كلمة السر | 9+ خانات، تبدأ بحرف |
| اليوزر نيم | 6+ خانات، يبدأ بحرف، حروف وأرقام وشرطة سفلية |
| رقم الجوال | يبدأ بـ + متبوعاً بأرقام (مثال: +966501234567) |

### 4. حساب الأدمن الافتراضي
- **اليوزر**: `bod`
- **كلمة السر**: `bod@1`
- يُنشأ تلقائياً عند أول تشغيل للسيرفر

### 5. بنر الإعلانات
- بنر ثابت أعلى الصفحات داخل `DashboardLayout`

### 6. الخطط والباقات
- تفعيل زر "الخطط والباقات" في لوحة التحكم
- يوجّه إلى صفحة `/plans`

## خطوات التطبيق

1. **تثبيت التبعيات**
   ```bash
   pnpm install
   ```

2. **تشغيل ترحيل قاعدة البيانات** (إضافة أعمدة username, passwordHash, phone)
   ```bash
   pnpm run db:push
   ```
   أو يدوياً:
   ```sql
   ALTER TABLE users ADD COLUMN username varchar(64) NULL UNIQUE;
   ALTER TABLE users ADD COLUMN passwordHash varchar(255) NULL;
   ALTER TABLE users ADD COLUMN phone varchar(20) NULL UNIQUE;
   ```

3. **تشغيل السيرفر**
   ```bash
   pnpm run dev
   ```

4. **تسجيل الدخول كأدمن**
   - اليوزر: `bod`
   - كلمة السر: `bod@1`

## لم يُنفّذ بعد (مرحلة لاحقة)
- شات الأدمن مع وكيل AI مفتوح المصدر
- إعدادات مفتوحة المصدر للموقع
- أيقونة أدمن خارج الموقع (إدارة من الجوال)
- صفحة المشاريع المحفوظة
- AI بمصادر آمنة محدثة
